import{u as R,a as V,g as j,e as H,_ as L}from"./index-u_sksyXT.js";import{_ as U}from"./queryIpLink.vue_vue_type_script_setup_true_lang-C6arf18q.js";import{f as m,a7 as S,ak as $,s as b,t,y as n,a3 as a,v as _,x as d,m as D,k as z}from"./libs-BMxpkVOl.js";import{S as y,j as E,t as J,T as x,ak as q}from"./arcoDesign-D0ixelLT.js";async function F(o){const e=R();await e.serverAvailable;const s=new URL(V(e.endpoint,"api/bans/ranks"),location.href);return s.searchParams.set("page",String(o.page)),o.pageSize&&s.searchParams.set("pageSize",String(o.pageSize)),o.filter&&s.searchParams.set("filter",o.filter),fetch(s,{headers:j()}).then(r=>(e.assertResponseLogin(r),r.json()))}const G={class:"search-box"},M=m({__name:"rankTable",setup(o){const{t:e}=S(),s=[{title:()=>e("page.topban.top50Table.column.ipaddress"),slotName:"address"},{title:()=>e("page.topban.top50Table.column.historyCount"),dataIndex:"count"}],{data:r,total:c,current:i,loading:p,pageSize:P,changeCurrent:C,changePageSize:v,run:k}=$(F,{defaultParams:[{page:1,pageSize:20}],pagination:{currentKey:"page",pageSizeKey:"pageSize",totalKey:"data.total"}},[H]),T=g=>{k({page:1,pageSize:20,filter:g})};return(g,Q)=>{const u=E,h=y,w=x,I=J;return z(),b(h,{direction:"vertical",size:"small"},{default:t(()=>{var f;return[n(u,{style:{width:"250px"},placeholder:a(e)("page.banlist.banlist.searchPlaceHolder"),"allow-clear":"","search-button":"",onChange:T},null,8,["placeholder"]),n(I,{stripe:"","sticky-header":"",columns:s,data:(f=a(r))==null?void 0:f.data.results,"column-resizable":"",loading:a(p),pagination:{total:a(c),current:a(i),pageSize:a(P),showPageSize:!0,baseSize:4,bufferSize:1},"filter-icon-align-left":"",onPageChange:a(C),onPageSizeChange:a(v)},{"ip-filter":t(({filterValue:l,setFilterValue:N,handleFilterConfirm:A,handleFilterReset:B})=>[D("div",G,[n(h,{direction:"vertical"},{default:t(()=>[n(u,{"model-value":l[0],placeholder:a(e)("page.topban.top50Table.searchPlaceholder"),"allow-clear":"",onSearch:A,onClear:B,onInput:K=>N([K])},null,8,["model-value","placeholder","onSearch","onClear","onInput"])]),_:2},1024)])]),address:t(({record:l})=>[n(w,{style:{"white-space":"nowrap"}},{default:t(()=>[n(U,{ip:l.peerIp,style:{color:"var(--color-text-1)"}},{default:t(()=>[_(d(l.peerIp),1)]),_:2},1032,["ip"])]),_:2},1024)]),_:1},8,["data","loading","pagination","onPageChange","onPageSizeChange"])]}),_:1})}}}),O=L(M,[["__scopeId","data-v-50e90f40"]]),ee=m({__name:"index",setup(o){const{t:e}=S();return(s,r)=>{const c=q,i=x,p=y;return z(),b(p,{direction:"vertical",size:"large"},{default:t(()=>[n(c,null,{default:t(()=>[_(d(a(e)("page.topban.usage")),1)]),_:1}),n(i,{style:{"font-size":"1.2em"}},{default:t(()=>[_(d(a(e)("page.topban.description")),1)]),_:1}),n(O)]),_:1})}}});export{ee as default};
