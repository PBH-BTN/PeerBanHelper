import{B as z,I as O,b as U,f as m,c as q,j as E,d as K,_ as R}from"./index-u_sksyXT.js";import{_ as G}from"./queryIpLink.vue_vue_type_script_setup_true_lang-C6arf18q.js";import{f as H,a7 as J,a as g,a9 as Q,s as h,k as _,t as e,y as a,a3 as o,m as W,v as p,u as N,x as l,j as k,F as X,P as Y}from"./libs-BMxpkVOl.js";import{t as Z,e as ee,S as ae,K as te,T as se,F as oe}from"./arcoDesign-D0ixelLT.js";const le=H({__name:"peerListModal",setup(ne,{expose:P}){const{t:n}=J(),f=g(!1),w=g(""),v=g(""),b=g("");P({showModal:(i,s,r)=>{w.value=i,v.value=s,b.value=r,f.value=!0,S(i,s)}});const D=()=>{f.value=!1,w.value="",v.value=""},{data:y,loading:F,run:S,cancel:T}=Q(z,{defaultParams:[w.value,v.value],manual:!0,pollingInterval:1e3}),A=[{title:()=>n("page.dashboard.peerList.column.address"),slotName:"peerAddress",width:320},{title:()=>n("page.dashboard.peerList.column.flag"),slotName:"flags",width:110},{title:"Peer ID",dataIndex:"peer.id",width:100},{title:()=>n("page.dashboard.peerList.column.clientName"),dataIndex:"peer.clientName",width:300},{title:()=>n("page.dashboard.peerList.column.speed"),slotName:"speed",width:140},{title:()=>n("page.dashboard.peerList.column.uploadedDownloaded"),slotName:"uploadDownload",width:140},{title:()=>n("page.dashboard.peerList.column.progress"),slotName:"progress",width:100}],B=i=>i.split(" ").map(s=>s+" - "+n("page.dashboard.peerList.column.flags."+s.trim()));return(i,s)=>{const r=se,d=ae,x=U,I=q,C=te,j=O,M=ee,V=Z,$=oe;return _(),h($,{visible:f.value,"onUpdate:visible":s[0]||(s[0]=c=>f.value=c),"hide-cancel":"",closable:"","unmount-on-close":"",width:"auto",onOk:D,onClose:s[1]||(s[1]=c=>o(T)())},{title:e(()=>[p(l(o(n)("page.dashboard.peerList.title")+b.value),1)]),default:e(()=>{var c;return[a(V,{columns:A,data:(c=o(y))==null?void 0:c.data,loading:!o(F)&&!o(y),style:{width:"1600px"},"virtual-list-props":{height:500},pagination:!1},{peerAddress:e(({record:t})=>[a(d,{wrap:!1},{default:e(()=>{var u,L;return[(L=(u=t.geo)==null?void 0:u.country)!=null&&L.iso?(_(),h(E,{key:0,iso:t.geo.country.iso},null,8,["iso"])):N("",!0),a(r,{copyable:"",code:"",style:{"white-space":"nowrap"}},{default:e(()=>[a(G,{ip:t.peer.address.ip,style:{color:"var(--color-text-2)"}},{default:e(()=>[p(l(o(K)(t.peer.address.ip,t.peer.address.port)),1)]),_:2},1032,["ip"])]),_:2},1024)]}),_:2},1024)]),speed:e(({record:t})=>[a(d,{fill:"",style:{"justify-content":"space-between"}},{default:e(()=>[a(d,{fill:"",direction:"vertical"},{default:e(()=>[a(r,null,{default:e(()=>[a(x,{class:"green"}),p(" "+l(o(m)(t.peer.uploadSpeed))+"/s ",1)]),_:2},1024),a(r,null,{default:e(()=>[a(I,{class:"red"}),p(" "+l(o(m)(t.peer.downloadSpeed))+"/s ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),uploadDownload:e(({record:t})=>[a(d,{fill:"",style:{"justify-content":"space-between"}},{default:e(()=>[a(d,{fill:"",direction:"vertical"},{default:e(()=>[a(r,null,{default:e(()=>[a(x,{class:"green"}),p(" "+l(o(m)(t.peer.uploaded)),1)]),_:2},1024),a(r,null,{default:e(()=>[a(I,{class:"red"}),p(" "+l(o(m)(t.peer.downloaded)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),progress:e(({record:t})=>[a(d,null,{default:e(()=>[a(C,{percent:t.peer.progress,size:"mini"},null,8,["percent"]),a(r,null,{default:e(()=>[p(l((t.peer.progress*100).toFixed(2)+"%"),1)]),_:2},1024)]),_:2},1024)]),flags:e(({record:t})=>[W("p",null,[p(l(t.peer.flags)+" ",1),t.peer.flags?(_(),h(M,{key:0},{content:e(()=>[(_(!0),k(X,null,Y(B(t.peer.flags),u=>(_(),k("p",{key:u},l(u),1))),128))]),default:e(()=>[a(j)]),_:2},1024)):N("",!0)])]),_:1},8,["data","loading"])]}),_:1},8,["visible"])}}}),ce=R(le,[["__scopeId","data-v-09e7f941"]]);export{ce as default};
