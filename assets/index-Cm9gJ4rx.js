const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./qbittorrent-DtI0x3aC.js","./index-DgfpHrne.js","./libs-CGCN05bf.js","./arcoDesign-oXuB2kqy.js","./uuid-BMzgKRou.js","./index-CPJN9c_R.css","./qbittorrentee-BzCNJoXY.js","./transmission-D__TE3Dr.js","./biglybt-CZN3mpVN.js","./deluge-BPOQ4wX2.js","./bitcomet-aZ2VAVDT.js"])))=>i.map(i=>d[i]);
import{h as j,J as d,r as u}from"./index-DgfpHrne.js";import{T as G,S as K}from"./init-DgQAB4DA.js";import{f as q,a8 as M,s as g,t as e,y as o,a9 as r,v as s,x as p,k as y,ao as W,a as z,u as Q,E as X,q as Y,m as Z,O as ee,ad as _,a3 as oe}from"./libs-CGCN05bf.js";/* empty css              */import{m as te,a7 as ae,D as ne,b as re,c as le,aL as se,f as x,n as de,S as F,F as ie,a2 as pe,a3 as ce,U as ue,R as _e,J as me,K as fe,O as ge,P as ye,h as ve,H as we,M as f,G as be}from"./arcoDesign-oXuB2kqy.js";import{v1 as De}from"./uuid-BMzgKRou.js";const he=q({__name:"scanDownloaderModal",props:{downloaders:{}},emits:["select"],setup(b){const{t:v}=M();return(D,O)=>{const h=se,B=le,w=re,T=ne,l=ae,n=x,m=te,E=de,V=F;return y(),g(V,{direction:"vertical",style:{width:"100%"}},{default:e(()=>[o(E,{"virtual-list-props":{height:300},data:b.downloaders},{item:e(({item:t,index:a})=>[(y(),g(m,{key:a},{actions:e(()=>[o(n,{type:"primary",onClick:i=>D.$emit("select",t)},{default:e(()=>[s(p(r(v)("page.oobe.addDownloader.scan.select")),1)]),_:1},8,["onClick"])]),default:e(()=>[o(l,{title:`${t.host}:${t.port}`},{avatar:e(()=>[o(h,{shape:"square"},{default:e(()=>[s(p(t.type[0].toUpperCase()),1)]),_:2},1024)]),description:e(()=>[o(T,null,{default:e(()=>[o(w,{label:r(v)("page.oobe.addDownloader.scan.type")},{default:e(()=>[o(B,{color:r(j)(t.type)},{default:e(()=>[s(p(t.type),1)]),_:2},1032,["color"])]),_:2},1032,["label"]),o(w,{label:"PID"},{default:e(()=>[s(p(t.pid),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["title"])]),_:2},1024))]),_:1},8,["data"])]),_:1})}}}),Be={href:"https://github.com/PBH-BTN/PBH-Adapter-BiglyBT"},Ie=q({__name:"index",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(b){const v=_(()=>u(()=>import("./qbittorrent-DtI0x3aC.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),D=_(()=>u(()=>import("./qbittorrentee-BzCNJoXY.js"),__vite__mapDeps([6,1,2,3,4,5]),import.meta.url)),O=_(()=>u(()=>import("./transmission-D__TE3Dr.js"),__vite__mapDeps([7,1,2,3,4,5]),import.meta.url)),h=_(()=>u(()=>import("./biglybt-CZN3mpVN.js"),__vite__mapDeps([8,1,2,3,4,5]),import.meta.url)),B=_(()=>u(()=>import("./deluge-BPOQ4wX2.js"),__vite__mapDeps([9,1,2,3,4,5]),import.meta.url)),w=_(()=>u(()=>import("./bitcomet-aZ2VAVDT.js"),__vite__mapDeps([10,1,2,3,4,5]),import.meta.url)),T={[d.qBittorrent]:v,[d.qBittorrentEE]:D,[d.Transmission]:O,[d.BiglyBT]:h,[d.Deluge]:B,[d.BitComet]:w},{t:l}=M(),n=W(b,"modelValue"),m=z(!1),E=async()=>{m.value=!0,n.value.downloader.config.endpoint.replace(/\/$/,"");try{const t=await G({id:De(),config:n.value.downloader.config});if(!t.success)throw new Error(t.message)}catch(t){return t instanceof Error&&f.error({content:t.message,resetOnHover:!0}),!1}finally{m.value=!1}f.success({content:l("page.oobe.addDownloader.test.success"),resetOnHover:!0}),n.value.valid=!0},V=async()=>{try{const t=await K();if(!t.data||t.data.length===0)return f.warning({content:l("page.oobe.addDownloader.scan.noDownloader"),resetOnHover:!0}),!0;if(t.data.length===1){const i=t.data[0];return n.value.downloader.config.type=i.type,n.value.downloader.config.endpoint=`http://${i.host}:${i.port}`,f.success({content:l("page.oobe.addDownloader.scan.one"),resetOnHover:!0}),!0}const{close:a}=be.info({title:l("page.oobe.addDownloader.scan.multi"),width:"60vh",content:()=>oe(he,{downloaders:t.data,onSelect:i=>{n.value.downloader.config.type=i.type,n.value.downloader.config.endpoint=`http://${i.host}:${i.port}`,a()}}),okText:l("page.oobe.addDownloader.scan.cancel")})}catch(t){t instanceof Error&&f.error({content:t.message,resetOnHover:!0})}return!0};return(t,a)=>{const i=ie,L=pe,S=ce,c=ge,$=fe,A=Y("i18n-t"),P=me,I=_e,R=ve,k=x,H=ye,N=ue,U=we,J=F;return y(),g(J,{direction:"vertical",style:{width:"70%"}},{default:e(()=>[o(S,{style:{"text-align":"left"}},{default:e(()=>[o(i,{style:{"margin-top":"0"}},{default:e(()=>[s(p(r(l)("page.oobe.addDownloader.title")),1)]),_:1}),o(L,null,{default:e(()=>[s(p(r(l)("page.oobe.addDownloader.description")),1)]),_:1})]),_:1}),o(U,{model:n.value.downloader,"auto-label-width":""},{default:e(()=>[o(N,{gutter:16,style:{display:"flex","justify-content":"space-between"}},{default:e(()=>[o(I,{span:8},{default:e(()=>[o(P,{field:"config.type",label:r(l)("page.dashboard.editModal.label.type"),required:""},X({default:e(()=>[o($,{modelValue:n.value.downloader.config.type,"onUpdate:modelValue":a[0]||(a[0]=C=>n.value.downloader.config.type=C),style:{width:"10em"},"trigger-props":{autoFitPopupMinWidth:!0}},{default:e(()=>[o(c,{value:r(d).qBittorrent},{default:e(()=>[...a[2]||(a[2]=[s("qBittorrent",-1)])]),_:1},8,["value"]),o(c,{value:r(d).qBittorrentEE},{default:e(()=>[...a[3]||(a[3]=[s("qBittorrentEE",-1)])]),_:1},8,["value"]),o(c,{value:r(d).BiglyBT},{default:e(()=>[...a[4]||(a[4]=[s("BiglyBT",-1)])]),_:1},8,["value"]),o(c,{value:r(d).Deluge},{default:e(()=>[...a[5]||(a[5]=[s("Deluge",-1)])]),_:1},8,["value"]),o(c,{value:r(d).BitComet},{default:e(()=>[...a[6]||(a[6]=[s("BitComet",-1)])]),_:1},8,["value"]),o(c,{value:r(d).Transmission},{default:e(()=>[...a[7]||(a[7]=[s("Transmission",-1)])]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:2},[n.value.downloader.config.type===r(d).BiglyBT?{name:"extra",fn:e(()=>[o(A,{keypath:"page.dashboard.editModal.biglybt"},{url:e(()=>[Z("a",Be,p(r(l)("page.dashboard.editModal.biglybt.url")),1)]),_:1})]),key:"0"}:void 0]),1032,["label"])]),_:1}),o(I,{span:8},{default:e(()=>[o(H,{content:r(l)("page.oobe.addDownloader.scan.tooltip"),onBeforeOk:V},{default:e(()=>[o(k,{type:"outline"},{icon:e(()=>[o(R)]),default:e(()=>[s(" "+p(r(l)("page.oobe.addDownloader.scan")),1)]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),(y(),g(ee(T[n.value.downloader.config.type]),{modelValue:n.value.downloader.config,"onUpdate:modelValue":a[1]||(a[1]=C=>n.value.downloader.config=C)},null,8,["modelValue"])),n.value.downloader.config.type?(y(),g(P,{key:0},{default:e(()=>[o(k,{loading:m.value,onClick:E},{default:e(()=>[s(p(r(l)("page.oobe.addDownloader.test")),1)]),_:1},8,["loading"])]),_:1})):Q("",!0)]),_:1},8,["model"])]),_:1})}}});export{Ie as default};
