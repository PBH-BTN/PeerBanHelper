import{u as K,a as R,g as V,e as j,_ as H}from"./index-DgfpHrne.js";import{_ as L}from"./queryIpLink.vue_vue_type_script_setup_true_lang-UXcGrBiH.js";import{f as m,a8 as f,aa as U,s as S,t,y as n,a9 as a,v as _,x as g,m as $,k as b}from"./libs-CGCN05bf.js";import{S as y,j as D,v as E,T as z,am as F}from"./arcoDesign-oXuB2kqy.js";import"./uuid-BMzgKRou.js";async function J(o){const e=K();await e.serverAvailable;const s=new URL(R(e.endpoint,"api/bans/ranks"),location.href);return s.searchParams.set("page",String(o.page)),o.pageSize&&s.searchParams.set("pageSize",String(o.pageSize)),o.filter&&s.searchParams.set("filter",o.filter),fetch(s,{headers:V()}).then(r=>(e.assertResponseLogin(r),r.json()))}const O={class:"search-box"},q=m({__name:"rankTable",setup(o){const{t:e}=f(),s=[{title:()=>e("page.topban.top50Table.column.ipaddress"),slotName:"address"},{title:()=>e("page.topban.top50Table.column.historyCount"),dataIndex:"count"}],{data:r,total:i,current:c,loading:p,pageSize:x,changeCurrent:P,changePageSize:v,run:C}=U(J,{defaultParams:[{page:1,pageSize:20}],pagination:{currentKey:"page",pageSizeKey:"pageSize",totalKey:"data.total"}},[j]),T=d=>{C({page:1,pageSize:20,filter:d})};return(d,M)=>{const u=D,h=y,w=z,k=E;return b(),S(h,{direction:"vertical",size:"small"},{default:t(()=>[n(u,{style:{width:"250px"},placeholder:a(e)("page.banlist.banlist.searchPlaceHolder"),"allow-clear":"","search-button":"",onChange:T},null,8,["placeholder"]),n(k,{stripe:"","sticky-header":"",columns:s,data:a(r)?.data.results,"column-resizable":"",loading:a(p),pagination:{total:a(i),current:a(c),pageSize:a(x),showPageSize:!0,baseSize:4,bufferSize:1},"filter-icon-align-left":"",onPageChange:a(P),onPageSizeChange:a(v)},{"ip-filter":t(({filterValue:l,setFilterValue:I,handleFilterConfirm:N,handleFilterReset:A})=>[$("div",O,[n(h,{direction:"vertical"},{default:t(()=>[n(u,{"model-value":l[0],placeholder:a(e)("page.topban.top50Table.searchPlaceholder"),"allow-clear":"",onSearch:N,onClear:A,onInput:B=>I([B])},null,8,["model-value","placeholder","onSearch","onClear","onInput"])]),_:2},1024)])]),address:t(({record:l})=>[n(w,{style:{"white-space":"nowrap"}},{default:t(()=>[n(L,{ip:l.peerIp,style:{color:"var(--color-text-1)"}},{default:t(()=>[_(g(l.peerIp),1)]),_:2},1032,["ip"])]),_:2},1024)]),_:1},8,["data","loading","pagination","onPageChange","onPageSizeChange"])]),_:1})}}}),G=H(q,[["__scopeId","data-v-3604e678"]]),ee=m({__name:"index",setup(o){const{t:e}=f();return(s,r)=>{const i=F,c=z,p=y;return b(),S(p,{direction:"vertical",size:"large"},{default:t(()=>[n(i,null,{default:t(()=>[_(g(a(e)("page.topban.usage")),1)]),_:1}),n(c,{style:{"font-size":"1.2em"}},{default:t(()=>[_(g(a(e)("page.topban.description")),1)]),_:1}),n(G)]),_:1})}}});export{ee as default};
