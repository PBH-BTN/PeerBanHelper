import{p as R,U as M,A as V}from"./index-u_sksyXT.js";/* empty css              */import{R as N,f as x,a7 as I,a as y,r as B,s as L,k as P,t as _,y as b,v as q,x as D,a3 as C}from"./libs-BMxpkVOl.js";import{G as E,H as T,q as z,aH as F,F as H,M as U}from"./arcoDesign-D0ixelLT.js";var k,S;function G(){if(S)return k;S=1;function m(u){if(typeof u!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(u))}function h(u,e){for(var r="",n=0,a=-1,i=0,l,s=0;s<=u.length;++s){if(s<u.length)l=u.charCodeAt(s);else{if(l===47)break;l=47}if(l===47){if(!(a===s-1||i===1))if(a!==s-1&&i===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var t=r.lastIndexOf("/");if(t!==r.length-1){t===-1?(r="",n=0):(r=r.slice(0,t),n=r.length-1-r.lastIndexOf("/")),a=s,i=0;continue}}else if(r.length===2||r.length===1){r="",n=0,a=s,i=0;continue}}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+u.slice(a+1,s):r=u.slice(a+1,s),n=s-a-1;a=s,i=0}else l===46&&i!==-1?++i:i=-1}return r}function g(u,e){var r=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+n:r+u+n:n}var v={resolve:function(){for(var e="",r=!1,n,a=arguments.length-1;a>=-1&&!r;a--){var i;a>=0?i=arguments[a]:(n===void 0&&(n=R.cwd()),i=n),m(i),i.length!==0&&(e=i+"/"+e,r=i.charCodeAt(0)===47)}return e=h(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(m(e),e.length===0)return".";var r=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=h(e,!r),e.length===0&&!r&&(e="."),e.length>0&&n&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return m(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,r=0;r<arguments.length;++r){var n=arguments[r];m(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":v.normalize(e)},relative:function(e,r){if(m(e),m(r),e===r||(e=v.resolve(e),r=v.resolve(r),e===r))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var a=e.length,i=a-n,l=1;l<r.length&&r.charCodeAt(l)===47;++l);for(var s=r.length,t=s-l,o=i<t?i:t,d=-1,f=0;f<=o;++f){if(f===o){if(t>o){if(r.charCodeAt(l+f)===47)return r.slice(l+f+1);if(f===0)return r.slice(l+f)}else i>o&&(e.charCodeAt(n+f)===47?d=f:f===0&&(d=0));break}var A=e.charCodeAt(n+f),w=r.charCodeAt(l+f);if(A!==w)break;A===47&&(d=f)}var c="";for(f=n+d+1;f<=a;++f)(f===a||e.charCodeAt(f)===47)&&(c.length===0?c+="..":c+="/..");return c.length>0?c+r.slice(l+d):(l+=d,r.charCodeAt(l)===47&&++l,r.slice(l))},_makeLong:function(e){return e},dirname:function(e){if(m(e),e.length===0)return".";for(var r=e.charCodeAt(0),n=r===47,a=-1,i=!0,l=e.length-1;l>=1;--l)if(r=e.charCodeAt(l),r===47){if(!i){a=l;break}}else i=!1;return a===-1?n?"/":".":n&&a===1?"//":e.slice(0,a)},basename:function(e,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');m(e);var n=0,a=-1,i=!0,l;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var s=r.length-1,t=-1;for(l=e.length-1;l>=0;--l){var o=e.charCodeAt(l);if(o===47){if(!i){n=l+1;break}}else t===-1&&(i=!1,t=l+1),s>=0&&(o===r.charCodeAt(s)?--s===-1&&(a=l):(s=-1,a=t))}return n===a?a=t:a===-1&&(a=e.length),e.slice(n,a)}else{for(l=e.length-1;l>=0;--l)if(e.charCodeAt(l)===47){if(!i){n=l+1;break}}else a===-1&&(i=!1,a=l+1);return a===-1?"":e.slice(n,a)}},extname:function(e){m(e);for(var r=-1,n=0,a=-1,i=!0,l=0,s=e.length-1;s>=0;--s){var t=e.charCodeAt(s);if(t===47){if(!i){n=s+1;break}continue}a===-1&&(i=!1,a=s+1),t===46?r===-1?r=s:l!==1&&(l=1):r!==-1&&(l=-1)}return r===-1||a===-1||l===0||l===1&&r===a-1&&r===n+1?"":e.slice(r,a)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return g("/",e)},parse:function(e){m(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;var n=e.charCodeAt(0),a=n===47,i;a?(r.root="/",i=1):i=0;for(var l=-1,s=0,t=-1,o=!0,d=e.length-1,f=0;d>=i;--d){if(n=e.charCodeAt(d),n===47){if(!o){s=d+1;break}continue}t===-1&&(o=!1,t=d+1),n===46?l===-1?l=d:f!==1&&(f=1):l!==-1&&(f=-1)}return l===-1||t===-1||f===0||f===1&&l===t-1&&l===s+1?t!==-1&&(s===0&&a?r.base=r.name=e.slice(1,t):r.base=r.name=e.slice(s,t)):(s===0&&a?(r.name=e.slice(1,l),r.base=e.slice(1,t)):(r.name=e.slice(s,l),r.base=e.slice(s,t)),r.ext=e.slice(l,t)),s>0?r.dir=e.slice(0,s-1):a&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};return v.posix=v,k=v,k}var J=G();const O=N(J),X=x({__name:"editRuleItemModal",setup(m,{expose:h}){const{t:g}=I(),v=y(!1),u=y(!1),e=B({ruleId:"",ruleName:"",subUrl:""}),r={ruleId:[{required:!0}],ruleName:[{required:!0,message:g("page.rule_management.ruleSubscribe.editModal.form.name.required")}],subUrl:[{required:!0},{validator(s,t){try{new URL(s),t()}catch{t(g("page.rule_management.ruleSubscribe.editModal.form.url.invalid"))}}}]};let n;h({showModal:(s,t,o)=>{u.value=s,n=t,!s&&o?(e.ruleId=o.ruleId,e.ruleName=o.ruleName,e.subUrl=o.subUrl):(e.ruleId=Math.random().toString(36).slice(2,10),e.ruleName="",e.subUrl=""),v.value=!0}});const a=y(),i=async()=>{var t;if(await((t=a.value)==null?void 0:t.validate()))return!1;if(u.value){const o=await V(e);return o.success?(n&&n(e),!0):(U.error({content:o.message,resetOnHover:!0}),!0)}else{const o=await M(e);return o.success?(n&&n(e),!0):(U.error({content:o.message,resetOnHover:!0}),!0)}},l=s=>{if(!e.ruleName)try{const t=new URL(s),o=O.parse(t.pathname).name;e.ruleName=o}catch{}};return(s,t)=>{const o=z,d=T,f=F,A=E,w=H;return P(),L(w,{visible:v.value,"onUpdate:visible":t[3]||(t[3]=c=>v.value=c),title:u.value?C(g)("page.rule_management.ruleSubscribe.editModal.title.new"):C(g)("page.rule_management.ruleSubscribe.editModal.title"),"unmount-on-close":"",onBeforeOk:i},{default:_(()=>[b(A,{ref_key:"formRef",ref:a,model:e,rules:r},{default:_(()=>[b(d,{field:"ruleId",label:"ID"},{extra:_(()=>[q(D(C(g)("page.rule_management.ruleSubscribe.editModal.form.id.extra")),1)]),default:_(()=>[b(o,{modelValue:e.ruleId,"onUpdate:modelValue":t[0]||(t[0]=c=>e.ruleId=c),disabled:!u.value,"allow-clear":""},null,8,["modelValue","disabled"])]),_:1}),b(d,{field:"ruleName",label:C(g)("page.rule_management.ruleSubscribe.editModal.form.name")},{default:_(()=>[b(o,{modelValue:e.ruleName,"onUpdate:modelValue":t[1]||(t[1]=c=>e.ruleName=c),"allow-clear":""},null,8,["modelValue"])]),_:1},8,["label"]),b(d,{field:"subUrl",label:"URL"},{default:_(()=>[b(f,{modelValue:e.subUrl,"onUpdate:modelValue":t[2]||(t[2]=c=>e.subUrl=c),"allow-clear":"","auto-size":{minRows:2,maxRows:5},onChange:l},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])}}});export{X as default};
