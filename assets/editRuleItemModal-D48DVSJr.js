import{U as R,C as M}from"./index-DQxZmiBE.js";/* empty css              */import{S as V,f as N,a8 as x,a as y,r as I,s as B,k as L,t as _,y as b,v as P,x as D,a9 as C}from"./libs-CuvjH-I_.js";import{p as q}from"./monacoEditor-BILfwyuz.js";import{H as E,J as T,r as z,aJ as F,G as H,M as S}from"./arcoDesign-O06LBKxm.js";import"./uuid-BMzgKRou.js";var k,U;function J(){if(U)return k;U=1;function c(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function h(o,e){for(var r="",n=0,t=-1,s=0,l,i=0;i<=o.length;++i){if(i<o.length)l=o.charCodeAt(i);else{if(l===47)break;l=47}if(l===47){if(!(t===i-1||s===1))if(t!==i-1&&s===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var a=r.lastIndexOf("/");if(a!==r.length-1){a===-1?(r="",n=0):(r=r.slice(0,a),n=r.length-1-r.lastIndexOf("/")),t=i,s=0;continue}}else if(r.length===2||r.length===1){r="",n=0,t=i,s=0;continue}}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+o.slice(t+1,i):r=o.slice(t+1,i),n=i-t-1;t=i,s=0}else l===46&&s!==-1?++s:s=-1}return r}function g(o,e){var r=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+n:r+o+n:n}var v={resolve:function(){for(var e="",r=!1,n,t=arguments.length-1;t>=-1&&!r;t--){var s;t>=0?s=arguments[t]:(n===void 0&&(n=q.cwd()),s=n),c(s),s.length!==0&&(e=s+"/"+e,r=s.charCodeAt(0)===47)}return e=h(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(c(e),e.length===0)return".";var r=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=h(e,!r),e.length===0&&!r&&(e="."),e.length>0&&n&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return c(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,r=0;r<arguments.length;++r){var n=arguments[r];c(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":v.normalize(e)},relative:function(e,r){if(c(e),c(r),e===r||(e=v.resolve(e),r=v.resolve(r),e===r))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var t=e.length,s=t-n,l=1;l<r.length&&r.charCodeAt(l)===47;++l);for(var i=r.length,a=i-l,f=s<a?s:a,d=-1,u=0;u<=f;++u){if(u===f){if(a>f){if(r.charCodeAt(l+u)===47)return r.slice(l+u+1);if(u===0)return r.slice(l+u)}else s>f&&(e.charCodeAt(n+u)===47?d=u:u===0&&(d=0));break}var A=e.charCodeAt(n+u),w=r.charCodeAt(l+u);if(A!==w)break;A===47&&(d=u)}var m="";for(u=n+d+1;u<=t;++u)(u===t||e.charCodeAt(u)===47)&&(m.length===0?m+="..":m+="/..");return m.length>0?m+r.slice(l+d):(l+=d,r.charCodeAt(l)===47&&++l,r.slice(l))},_makeLong:function(e){return e},dirname:function(e){if(c(e),e.length===0)return".";for(var r=e.charCodeAt(0),n=r===47,t=-1,s=!0,l=e.length-1;l>=1;--l)if(r=e.charCodeAt(l),r===47){if(!s){t=l;break}}else s=!1;return t===-1?n?"/":".":n&&t===1?"//":e.slice(0,t)},basename:function(e,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');c(e);var n=0,t=-1,s=!0,l;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var i=r.length-1,a=-1;for(l=e.length-1;l>=0;--l){var f=e.charCodeAt(l);if(f===47){if(!s){n=l+1;break}}else a===-1&&(s=!1,a=l+1),i>=0&&(f===r.charCodeAt(i)?--i===-1&&(t=l):(i=-1,t=a))}return n===t?t=a:t===-1&&(t=e.length),e.slice(n,t)}else{for(l=e.length-1;l>=0;--l)if(e.charCodeAt(l)===47){if(!s){n=l+1;break}}else t===-1&&(s=!1,t=l+1);return t===-1?"":e.slice(n,t)}},extname:function(e){c(e);for(var r=-1,n=0,t=-1,s=!0,l=0,i=e.length-1;i>=0;--i){var a=e.charCodeAt(i);if(a===47){if(!s){n=i+1;break}continue}t===-1&&(s=!1,t=i+1),a===46?r===-1?r=i:l!==1&&(l=1):r!==-1&&(l=-1)}return r===-1||t===-1||l===0||l===1&&r===t-1&&r===n+1?"":e.slice(r,t)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return g("/",e)},parse:function(e){c(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;var n=e.charCodeAt(0),t=n===47,s;t?(r.root="/",s=1):s=0;for(var l=-1,i=0,a=-1,f=!0,d=e.length-1,u=0;d>=s;--d){if(n=e.charCodeAt(d),n===47){if(!f){i=d+1;break}continue}a===-1&&(f=!1,a=d+1),n===46?l===-1?l=d:u!==1&&(u=1):l!==-1&&(u=-1)}return l===-1||a===-1||u===0||u===1&&l===a-1&&l===i+1?a!==-1&&(i===0&&t?r.base=r.name=e.slice(1,a):r.base=r.name=e.slice(i,a)):(i===0&&t?(r.name=e.slice(1,l),r.base=e.slice(1,a)):(r.name=e.slice(i,l),r.base=e.slice(i,a)),r.ext=e.slice(l,a)),i>0?r.dir=e.slice(0,i-1):t&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};return v.posix=v,k=v,k}var G=J();const O=V(G),Z=N({__name:"editRuleItemModal",setup(c,{expose:h}){const{t:g}=x(),v=y(!1),o=y(!1),e=I({ruleId:"",ruleName:"",subUrl:""}),r={ruleId:[{required:!0}],ruleName:[{required:!0,message:g("page.rule_management.ruleSubscribe.editModal.form.name.required")}],subUrl:[{required:!0},{validator(i,a){try{new URL(i),a()}catch{a(g("page.rule_management.ruleSubscribe.editModal.form.url.invalid"))}}}]};let n;h({showModal:(i,a,f)=>{o.value=i,n=a,!i&&f?(e.ruleId=f.ruleId,e.ruleName=f.ruleName,e.subUrl=f.subUrl):(e.ruleId=Math.random().toString(36).slice(2,10),e.ruleName="",e.subUrl=""),v.value=!0}});const t=y(),s=async()=>{if(await t.value?.validate())return!1;if(o.value){const a=await M(e);return a.success?(n&&n(e),!0):(S.error({content:a.message,resetOnHover:!0}),!0)}else{const a=await R(e);return a.success?(n&&n(e),!0):(S.error({content:a.message,resetOnHover:!0}),!0)}},l=i=>{if(!e.ruleName)try{const a=new URL(i),f=O.parse(a.pathname).name;e.ruleName=f}catch{}};return(i,a)=>{const f=z,d=T,u=F,A=E,w=H;return L(),B(w,{visible:v.value,"onUpdate:visible":a[3]||(a[3]=m=>v.value=m),title:o.value?C(g)("page.rule_management.ruleSubscribe.editModal.title.new"):C(g)("page.rule_management.ruleSubscribe.editModal.title"),"unmount-on-close":"",onBeforeOk:s},{default:_(()=>[b(A,{ref_key:"formRef",ref:t,model:e,rules:r},{default:_(()=>[b(d,{field:"ruleId",label:"ID"},{extra:_(()=>[P(D(C(g)("page.rule_management.ruleSubscribe.editModal.form.id.extra")),1)]),default:_(()=>[b(f,{modelValue:e.ruleId,"onUpdate:modelValue":a[0]||(a[0]=m=>e.ruleId=m),disabled:!o.value,"allow-clear":""},null,8,["modelValue","disabled"])]),_:1}),b(d,{field:"ruleName",label:C(g)("page.rule_management.ruleSubscribe.editModal.form.name")},{default:_(()=>[b(f,{modelValue:e.ruleName,"onUpdate:modelValue":a[1]||(a[1]=m=>e.ruleName=m),"allow-clear":""},null,8,["modelValue"])]),_:1},8,["label"]),b(d,{field:"subUrl",label:"URL"},{default:_(()=>[b(u,{modelValue:e.subUrl,"onUpdate:modelValue":a[2]||(a[2]=m=>e.subUrl=m),"allow-clear":"","auto-size":{minRows:2,maxRows:5},onChange:l},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])}}});export{Z as default};
