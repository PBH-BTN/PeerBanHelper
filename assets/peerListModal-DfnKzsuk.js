import{n as z,j as O,_ as R,f as m,I as U,b as q,c as E,e as Q}from"./index-DdbvvIWz.js";import{f as G,a6 as H,r as g,a8 as J,j as _,s as h,t as e,v as r,x as o,a2 as l,y as a,u as N,p as K,k,F as W,P as X}from"./libs-BhKr0JPt.js";import{T as Y,S as Z,R as ee,c as ae,o as te,Q as se}from"./arcoDesign-n2VDRiGR.js";const oe=G({__name:"peerListModal",setup(le,{expose:D}){const{t:n}=H(),f=g(!1),w=g(""),v=g(""),b=g("");D({showModal:(i,s,p)=>{w.value=i,v.value=s,b.value=p,f.value=!0,C(i,s)}});const S=()=>{f.value=!1,w.value="",v.value=""},{data:y,loading:T,run:C,cancel:F}=J(z,{defaultParams:[w.value,v.value],manual:!0,pollingInterval:1e3}),P=[{title:()=>n("page.dashboard.peerList.column.address"),slotName:"peerAddress",width:320},{title:()=>n("page.dashboard.peerList.column.flag"),slotName:"flags",width:110},{title:"Peer ID",dataIndex:"peer.id",width:100},{title:()=>n("page.dashboard.peerList.column.clientName"),dataIndex:"peer.clientName",width:300},{title:()=>n("page.dashboard.peerList.column.speed"),slotName:"speed",width:140},{title:()=>n("page.dashboard.peerList.column.uploadedDownloaded"),slotName:"uploadDownload",width:140},{title:()=>n("page.dashboard.peerList.column.progress"),slotName:"progress",width:100}],j=i=>i.split(" ").map(s=>s+" - "+n("page.dashboard.peerList.column.flags."+s.trim()));return(i,s)=>{const p=Y,d=Z,x=U,L=q,A=ee,B=E,M=ae,V=te,$=se;return _(),h($,{visible:f.value,"onUpdate:visible":s[0]||(s[0]=c=>f.value=c),"hide-cancel":"",closable:"","unmount-on-close":"",width:"auto",onOk:S,onClose:s[1]||(s[1]=c=>l(F)())},{title:e(()=>[r(o(l(n)("page.dashboard.peerList.title")+b.value),1)]),default:e(()=>{var c;return[a(V,{columns:P,data:(c=l(y))==null?void 0:c.data,loading:!l(T)&&!l(y),style:{width:"1600px"},"virtual-list-props":{height:500},pagination:!1},{peerAddress:e(({record:t})=>[a(d,{wrap:!1},{default:e(()=>{var u,I;return[(I=(u=t.geo)==null?void 0:u.country)!=null&&I.iso?(_(),h(O,{key:0,iso:t.geo.country.iso},null,8,["iso"])):N("",!0),a(p,{copyable:"",code:"",style:{"white-space":"nowrap"}},{default:e(()=>[a(R,{ip:t.peer.address.ip,style:{color:"var(--color-text-2)"}},{default:e(()=>[r(o(t.peer.address.ip)+":"+o(t.peer.address.port),1)]),_:2},1032,["ip"])]),_:2},1024)]}),_:2},1024)]),speed:e(({record:t})=>[a(d,{fill:"",style:{"justify-content":"space-between"}},{default:e(()=>[a(d,{fill:"",direction:"vertical"},{default:e(()=>[a(p,null,{default:e(()=>[a(x,{class:"green"}),r(" "+o(l(m)(t.peer.uploadSpeed))+"/s ",1)]),_:2},1024),a(p,null,{default:e(()=>[a(L,{class:"red"}),r(" "+o(l(m)(t.peer.downloadSpeed))+"/s ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),uploadDownload:e(({record:t})=>[a(d,{fill:"",style:{"justify-content":"space-between"}},{default:e(()=>[a(d,{fill:"",direction:"vertical"},{default:e(()=>[a(p,null,{default:e(()=>[a(x,{class:"green"}),r(" "+o(l(m)(t.peer.uploaded)),1)]),_:2},1024),a(p,null,{default:e(()=>[a(L,{class:"red"}),r(" "+o(l(m)(t.peer.downloaded)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),progress:e(({record:t})=>[a(d,null,{default:e(()=>[a(A,{percent:t.peer.progress,size:"mini"},null,8,["percent"]),a(p,null,{default:e(()=>[r(o((t.peer.progress*100).toFixed(2)+"%"),1)]),_:2},1024)]),_:2},1024)]),flags:e(({record:t})=>[K("p",null,[r(o(t.peer.flags)+" ",1),t.peer.flags?(_(),h(M,{key:0},{content:e(()=>[(_(!0),k(W,null,X(j(t.peer.flags),u=>(_(),k("p",{key:u},o(u),1))),128))]),default:e(()=>[a(B)]),_:2},1024)):N("",!0)])]),_:1},8,["data","loading"])]}),_:1},8,["visible"])}}}),de=Q(oe,[["__scopeId","data-v-953df596"]]);export{de as default};
