const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./qbittorrent-B92S2bUj.js","./index-D_43CYhG.js","./libs-CUOCgJ8C.js","./monacoEditor-zp0MnlWC.js","./monacoEditor-Dprb6f6S.css","./arcoDesign--yWoNkTR.js","./index-BS1dpKhb.css","./qbittorrentee-049DHhgP.js","./transmission-B1UfyyVj.js","./biglybt-BvE5e6er.js","./deluge-KnRXCTzW.js","./bitcomet-DyDsteBd.js"])))=>i.map(i=>d[i]);
import{_ as u}from"./monacoEditor-zp0MnlWC.js";import{h as j,H as d,F as J}from"./index-D_43CYhG.js";import{a as K,S as Q}from"./init-D_SJYhvo.js";import{f as k,a8 as M,s as g,t as e,y as o,a9 as r,v as s,x as p,k as y,aq as W,u as z,G as X,q as Y,m as Z,P as ee,ad as _,a as oe,a2 as te}from"./libs-CUOCgJ8C.js";/* empty css              */import{m as ae,Q as ne,D as re,b as le,c as se,aL as de,f as F,n as ie,S as x,F as pe,a3 as ce,a4 as ue,V as _e,U as me,J as fe,K as ge,O as ye,P as ve,h as we,H as be,M as f,G as De}from"./arcoDesign--yWoNkTR.js";const he=k({__name:"scanDownloaderModal",props:{downloaders:{}},emits:["select"],setup(b){const{t:v}=M();return(D,P)=>{const h=de,B=se,w=le,T=re,l=ne,n=F,m=ae,E=ie,V=x;return y(),g(V,{direction:"vertical",style:{width:"100%"}},{default:e(()=>[o(E,{"virtual-list-props":{height:300},data:b.downloaders},{item:e(({item:t,index:a})=>[(y(),g(m,{key:a},{actions:e(()=>[o(n,{type:"primary",onClick:i=>D.$emit("select",t)},{default:e(()=>[s(p(r(v)("page.oobe.addDownloader.scan.select")),1)]),_:1},8,["onClick"])]),default:e(()=>[o(l,{title:`${t.host}:${t.port}`},{avatar:e(()=>[o(h,{shape:"square"},{default:e(()=>[s(p(t.type[0].toUpperCase()),1)]),_:2},1024)]),description:e(()=>[o(T,null,{default:e(()=>[o(w,{label:r(v)("page.oobe.addDownloader.scan.type")},{default:e(()=>[o(B,{color:r(j)(t.type)},{default:e(()=>[s(p(t.type),1)]),_:2},1032,["color"])]),_:2},1032,["label"]),o(w,{label:"PID"},{default:e(()=>[s(p(t.pid),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["title"])]),_:2},1024))]),_:1},8,["data"])]),_:1})}}}),Be={href:"https://github.com/PBH-BTN/PBH-Adapter-BiglyBT"},Oe=k({__name:"index",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(b){const v=_(()=>u(()=>import("./qbittorrent-B92S2bUj.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)),D=_(()=>u(()=>import("./qbittorrentee-049DHhgP.js"),__vite__mapDeps([7,1,2,3,4,5,6]),import.meta.url)),P=_(()=>u(()=>import("./transmission-B1UfyyVj.js"),__vite__mapDeps([8,1,2,3,4,5,6]),import.meta.url)),h=_(()=>u(()=>import("./biglybt-BvE5e6er.js"),__vite__mapDeps([9,1,2,3,4,5,6]),import.meta.url)),B=_(()=>u(()=>import("./deluge-KnRXCTzW.js"),__vite__mapDeps([10,1,2,3,4,5,6]),import.meta.url)),w=_(()=>u(()=>import("./bitcomet-DyDsteBd.js"),__vite__mapDeps([11,1,2,3,4,5,6]),import.meta.url)),T={[d.qBittorrent]:v,[d.qBittorrentEE]:D,[d.Transmission]:P,[d.BiglyBT]:h,[d.Deluge]:B,[d.BitComet]:w},{t:l}=M(),n=W(b,"modelValue"),m=oe(!1),E=async()=>{m.value=!0,n.value.downloader.config.endpoint.replace(/\/$/,"");try{const t=await K({id:await J(),config:n.value.downloader.config});if(!t.success)throw new Error(t.message)}catch(t){return t instanceof Error&&f.error({content:t.message,resetOnHover:!0}),!1}finally{m.value=!1}f.success({content:l("page.oobe.addDownloader.test.success"),resetOnHover:!0}),n.value.downloaderValid=!0},V=async()=>{try{const t=await Q();if(!t.data||t.data.length===0)return f.warning({content:l("page.oobe.addDownloader.scan.noDownloader"),resetOnHover:!0}),!0;if(t.data.length===1){const i=t.data[0];return n.value.downloader.config.type=i.type,n.value.downloader.config.endpoint=`http://${i.host}:${i.port}`,f.success({content:l("page.oobe.addDownloader.scan.one"),resetOnHover:!0}),!0}const{close:a}=De.info({title:l("page.oobe.addDownloader.scan.multi"),width:"60vh",content:()=>te(he,{downloaders:t.data,onSelect:i=>{n.value.downloader.config.type=i.type,n.value.downloader.config.endpoint=`http://${i.host}:${i.port}`,a()}}),okText:l("page.oobe.addDownloader.scan.cancel")})}catch(t){t instanceof Error&&f.error({content:t.message,resetOnHover:!0})}return!0};return(t,a)=>{const i=pe,L=ce,S=ue,c=ye,$=ge,A=Y("i18n-t"),I=fe,O=me,H=we,q=F,R=ve,U=_e,N=be,G=x;return y(),g(G,{direction:"vertical",style:{width:"70%"}},{default:e(()=>[o(S,{style:{"text-align":"left"}},{default:e(()=>[o(i,{style:{"margin-top":"0"}},{default:e(()=>[s(p(r(l)("page.oobe.addDownloader.title")),1)]),_:1}),o(L,null,{default:e(()=>[s(p(r(l)("page.oobe.addDownloader.description")),1)]),_:1})]),_:1}),o(N,{model:n.value.downloader,"auto-label-width":""},{default:e(()=>[o(U,{gutter:16,style:{display:"flex","justify-content":"space-between"}},{default:e(()=>[o(O,{span:8},{default:e(()=>[o(I,{field:"config.type",label:r(l)("page.dashboard.editModal.label.type"),required:""},X({default:e(()=>[o($,{modelValue:n.value.downloader.config.type,"onUpdate:modelValue":a[0]||(a[0]=C=>n.value.downloader.config.type=C),style:{width:"10em"},"trigger-props":{autoFitPopupMinWidth:!0}},{default:e(()=>[o(c,{value:r(d).qBittorrent},{default:e(()=>[...a[2]||(a[2]=[s("qBittorrent",-1)])]),_:1},8,["value"]),o(c,{value:r(d).qBittorrentEE},{default:e(()=>[...a[3]||(a[3]=[s("qBittorrentEE",-1)])]),_:1},8,["value"]),o(c,{value:r(d).BiglyBT},{default:e(()=>[...a[4]||(a[4]=[s("BiglyBT",-1)])]),_:1},8,["value"]),o(c,{value:r(d).Deluge},{default:e(()=>[...a[5]||(a[5]=[s("Deluge",-1)])]),_:1},8,["value"]),o(c,{value:r(d).BitComet},{default:e(()=>[...a[6]||(a[6]=[s("BitComet",-1)])]),_:1},8,["value"]),o(c,{value:r(d).Transmission},{default:e(()=>[...a[7]||(a[7]=[s("Transmission",-1)])]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:2},[n.value.downloader.config.type===r(d).BiglyBT?{name:"extra",fn:e(()=>[o(A,{keypath:"page.dashboard.editModal.biglybt"},{url:e(()=>[Z("a",Be,p(r(l)("page.dashboard.editModal.biglybt.url")),1)]),_:1})]),key:"0"}:void 0]),1032,["label"])]),_:1}),o(O,{span:8},{default:e(()=>[o(R,{content:r(l)("page.oobe.addDownloader.scan.tooltip"),onBeforeOk:V},{default:e(()=>[o(q,{type:"outline"},{icon:e(()=>[o(H)]),default:e(()=>[s(" "+p(r(l)("page.oobe.addDownloader.scan")),1)]),_:1})]),_:1},8,["content"])]),_:1})]),_:1}),(y(),g(ee(T[n.value.downloader.config.type]),{modelValue:n.value.downloader.config,"onUpdate:modelValue":a[1]||(a[1]=C=>n.value.downloader.config=C)},null,8,["modelValue"])),n.value.downloader.config.type?(y(),g(I,{key:0},{default:e(()=>[o(q,{loading:m.value,onClick:E},{default:e(()=>[s(p(r(l)("page.oobe.addDownloader.test")),1)]),_:1},8,["loading"])]),_:1})):z("",!0)]),_:1},8,["model"])]),_:1})}}});export{Oe as default};
