import{u as K,a as R,g as V,e as j,_ as H}from"./index-g-fT44qg.js";import{_ as L}from"./queryIpLink.vue_vue_type_script_setup_true_lang-Dhvf9h4O.js";import{f,a7 as m,a8 as U,s as S,t,y as n,a3 as a,v as _,x as d,m as $,k as b}from"./libs-D1siNBiN.js";import{S as z,j as D,v as E,T as y,al as J}from"./arcoDesign-BnuLdl8F.js";import"./uuid-5hg4BtTT.js";async function q(o){const e=K();await e.serverAvailable;const s=new URL(R(e.endpoint,"api/bans/ranks"),location.href);return s.searchParams.set("page",String(o.page)),o.pageSize&&s.searchParams.set("pageSize",String(o.pageSize)),o.filter&&s.searchParams.set("filter",o.filter),fetch(s,{headers:V()}).then(r=>(e.assertResponseLogin(r),r.json()))}const F={class:"search-box"},G=f({__name:"rankTable",setup(o){const{t:e}=m(),s=[{title:()=>e("page.topban.top50Table.column.ipaddress"),slotName:"address"},{title:()=>e("page.topban.top50Table.column.historyCount"),dataIndex:"count"}],{data:r,total:i,current:c,loading:p,pageSize:x,changeCurrent:P,changePageSize:v,run:C}=U(q,{defaultParams:[{page:1,pageSize:20}],pagination:{currentKey:"page",pageSizeKey:"pageSize",totalKey:"data.total"}},[j]),T=g=>{C({page:1,pageSize:20,filter:g})};return(g,O)=>{const u=D,h=z,w=y,k=E;return b(),S(h,{direction:"vertical",size:"small"},{default:t(()=>[n(u,{style:{width:"250px"},placeholder:a(e)("page.banlist.banlist.searchPlaceHolder"),"allow-clear":"","search-button":"",onChange:T},null,8,["placeholder"]),n(k,{stripe:"","sticky-header":"",columns:s,data:a(r)?.data.results,"column-resizable":"",loading:a(p),pagination:{total:a(i),current:a(c),pageSize:a(x),showPageSize:!0,baseSize:4,bufferSize:1},"filter-icon-align-left":"",onPageChange:a(P),onPageSizeChange:a(v)},{"ip-filter":t(({filterValue:l,setFilterValue:I,handleFilterConfirm:N,handleFilterReset:A})=>[$("div",F,[n(h,{direction:"vertical"},{default:t(()=>[n(u,{"model-value":l[0],placeholder:a(e)("page.topban.top50Table.searchPlaceholder"),"allow-clear":"",onSearch:N,onClear:A,onInput:B=>I([B])},null,8,["model-value","placeholder","onSearch","onClear","onInput"])]),_:2},1024)])]),address:t(({record:l})=>[n(w,{style:{"white-space":"nowrap"}},{default:t(()=>[n(L,{ip:l.peerIp,style:{color:"var(--color-text-1)"}},{default:t(()=>[_(d(l.peerIp),1)]),_:2},1032,["ip"])]),_:2},1024)]),_:1},8,["data","loading","pagination","onPageChange","onPageSizeChange"])]),_:1})}}}),M=H(G,[["__scopeId","data-v-50e90f40"]]),ee=f({__name:"index",setup(o){const{t:e}=m();return(s,r)=>{const i=J,c=y,p=z;return b(),S(p,{direction:"vertical",size:"large"},{default:t(()=>[n(i,null,{default:t(()=>[_(d(a(e)("page.topban.usage")),1)]),_:1}),n(c,{style:{"font-size":"1.2em"}},{default:t(()=>[_(d(a(e)("page.topban.description")),1)]),_:1}),n(M)]),_:1})}}});export{ee as default};
