import{E as U,h as P}from"./index-5D3j0ok9.js";import{f as I,a8 as k,a as b,c as T,aa as K,w as O,s as B,k as D,t,y as n,a9 as e,v as p,x as i}from"./libs-4DgHpoAC.js";import{v as G,c as V,T as E,G as j}from"./arcoDesign-DAWZ9Tcr.js";import"./uuid-BMzgKRou.js";var l=(u=>(u.AUTO="AUTO",u.MANUAL="MANUAL",u))(l||{});const R=I({__name:"logModal",setup(u,{expose:f}){const{t:o,d:S}=k(),r=b(!1);f({showModal:()=>{r.value=!0}});const v=[{title:"ID",slotName:"ruleId"},{title:()=>o("page.rule_management.ruleSubscribe.updateLog.updateTime"),slotName:"updateTime"},{title:()=>o("page.rule_management.ruleSubscribe.updateLog.ruleCount"),dataIndex:"count"},{title:()=>o("page.rule_management.ruleSubscribe.updateLog.updateType"),slotName:"updateType"}],s=b(!0),y={[l.MANUAL]:"page.rule_management.ruleSubscribe.updateLog.updateType.manual",[l.AUTO]:"page.rule_management.ruleSubscribe.updateLog.updateType.auto"},h=T(()=>s.value||A.value||!c.value),{data:L,total:z,current:g,loading:A,pageSize:d,changeCurrent:w,changePageSize:x}=K(U,{defaultParams:[{page:1,pageSize:5}],pagination:{currentKey:"page",pageSizeKey:"pageSize",totalKey:"data.total"},onAfter:()=>{s.value=!1}});O([d,g],()=>{s.value=!0});const c=T(()=>L.value?.data.results);return(q,m)=>{const _=V,C=E,M=G,N=j;return D(),B(N,{visible:r.value,"onUpdate:visible":m[0]||(m[0]=a=>r.value=a),title:e(o)("page.rule_management.ruleSubscribe.updateLog"),"unmount-on-close":"","modal-style":{width:"30vw"}},{default:t(()=>[n(M,{stripe:!0,columns:v,data:c.value,loading:h.value,pagination:{total:e(z),current:e(g),pageSize:e(d),showPageSize:!0,baseSize:4,bufferSize:1},size:"medium",class:"banlog-table",onPageChange:e(w),onPageSizeChange:e(x)},{ruleId:t(({record:a})=>[n(_,{color:e(P)(a.ruleId)},{default:t(()=>[p(i(a.ruleId),1)]),_:2},1032,["color"])]),updateTime:t(({record:a})=>[n(C,null,{default:t(()=>[p(i(e(S)(a.updateTime,"long")),1)]),_:2},1024)]),updateType:t(({record:a})=>[n(_,{color:a.updateType===e(l).MANUAL?"green":"blue"},{default:t(()=>[p(i(e(o)(y[a.updateType]??"page.rule_management.ruleSubscribe.updateLog.updateType.unknown")),1)]),_:2},1032,["color"])]),_:1},8,["data","loading","pagination","onPageChange","onPageSizeChange"])]),_:1},8,["visible","title"])}}});export{R as default};
