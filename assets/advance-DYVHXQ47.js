import"./index-JbIA5Q1X.js";import{T as R}from"./init-CdjzJwb6.js";import{f as E,a8 as N,aq as B,s as u,t,y as l,u as p,v as i,x as c,a9 as d,r as D,a as V,k as r}from"./libs-BUQTu6zj.js";import{T as L,J as Q,w as F,H as O,aI as P,S as h,aK as z,r as G,ad as J,aH as K,f as j,M as w}from"./arcoDesign-c6clcD1o.js";import"./monacoEditor-0Xg49b8d.js";const $=E({__name:"advance",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(q){const{t:o}=N(),e=B(q,"modelValue"),m=D({known:!1}),v=V(!1),g=V(),k=async()=>{if(!await g.value?.validate()){try{const a=await R(e.value.database);if(!a.success)throw new Error(a.message)}catch(a){return a instanceof Error&&w.error({content:a.message,resetOnHover:!0}),!1}finally{v.value=!1}w.success({content:o("page.oobe.advance.addDatabase.test.success"),resetOnHover:!0}),e.value.databaseValid=!0}},x=()=>{m.known||(e.value.database={type:"sqlite"},e.value.databaseValid=!0)};return(C,a)=>{const S=L,T=F,n=Q,y=O,b=z,_=h,U=P,f=G,I=J,H=K,M=j;return r(),u(_,{direction:"vertical",size:"medium"},{default:t(()=>[l(S,null,{default:t(()=>[i(c(d(o)("page.oobe.advance.description")),1)]),_:1}),l(y,{model:m},{default:t(()=>[l(n,{field:"pageConfig.known",label:d(o)("page.oobe.advance.known")},{default:t(()=>[l(T,{modelValue:m.known,"onUpdate:modelValue":a[0]||(a[0]=s=>m.known=s),onChange:x},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"]),m.known?(r(),u(y,{key:0,ref_key:"formRef",ref:g,model:e.value,style:{"margin-top":"5vh","text-align":"center"}},{default:t(()=>[l(n,{required:"",label:d(o)("page.settings.tab.config.database.type"),field:"database.type"},{default:t(()=>[l(U,{modelValue:e.value.database.type,"onUpdate:modelValue":a[1]||(a[1]=s=>e.value.database.type=s)},{default:t(()=>[l(_,null,{default:t(()=>[l(b,{value:"sqlite"},{default:t(()=>[...a[7]||(a[7]=[i("SQLite",-1)])]),_:1}),l(b,{value:"h2"},{default:t(()=>[...a[8]||(a[8]=[i("H2",-1)])]),_:1}),l(b,{value:"mysql"},{default:t(()=>[...a[9]||(a[9]=[i("MySQL",-1)])]),_:1}),l(b,{value:"postgresql"},{default:t(()=>[...a[10]||(a[10]=[i("PostgreSQL",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),e.value.database.type==="mysql"||e.value.database.type==="postgresql"?(r(),u(n,{key:0,label:d(o)("page.settings.tab.config.database.host"),field:"database.host",required:""},{default:t(()=>[l(f,{modelValue:e.value.database.host,"onUpdate:modelValue":a[2]||(a[2]=s=>e.value.database.host=s),style:{width:"250px"}},null,8,["modelValue"])]),_:1},8,["label"])):p("",!0),e.value.database.type==="mysql"||e.value.database.type==="postgresql"?(r(),u(n,{key:1,label:d(o)("page.settings.tab.config.database.port"),field:"database.port",required:""},{default:t(()=>[l(I,{modelValue:e.value.database.port,"onUpdate:modelValue":a[3]||(a[3]=s=>e.value.database.port=s),style:{width:"100px"},precision:0},null,8,["modelValue"])]),_:1},8,["label"])):p("",!0),e.value.database.type==="mysql"||e.value.database.type==="postgresql"?(r(),u(n,{key:2,label:d(o)("page.settings.tab.config.database.database"),field:"database.database",required:""},{default:t(()=>[l(f,{modelValue:e.value.database.database,"onUpdate:modelValue":a[4]||(a[4]=s=>e.value.database.database=s),style:{width:"250px"}},null,8,["modelValue"])]),_:1},8,["label"])):p("",!0),e.value.database.type==="mysql"||e.value.database.type==="postgresql"?(r(),u(n,{key:3,label:d(o)("page.settings.tab.config.database.username"),field:"database.username",required:""},{default:t(()=>[l(f,{modelValue:e.value.database.username,"onUpdate:modelValue":a[5]||(a[5]=s=>e.value.database.username=s),style:{width:"250px"}},null,8,["modelValue"])]),_:1},8,["label"])):p("",!0),e.value.database.type==="mysql"||e.value.database.type==="postgresql"?(r(),u(n,{key:4,label:d(o)("page.settings.tab.config.database.password"),field:"database.password",required:""},{default:t(()=>[l(H,{modelValue:e.value.database.password,"onUpdate:modelValue":a[6]||(a[6]=s=>e.value.database.password=s),style:{width:"250px"}},null,8,["modelValue"])]),_:1},8,["label"])):p("",!0),e.value.database.type==="mysql"||e.value.database.type==="postgresql"?(r(),u(n,{key:5},{default:t(()=>[l(M,{loading:v.value,onClick:k},{default:t(()=>[i(c(d(o)("page.oobe.advance.database.test")),1)]),_:1},8,["loading"])]),_:1})):p("",!0)]),_:1},8,["model"])):p("",!0)]),_:1})}}});export{$ as default};
