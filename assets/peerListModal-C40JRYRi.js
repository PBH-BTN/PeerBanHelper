import{F as V,I as z,b as O,f as _,c as U,j as q,d as E,_ as G}from"./index-5D3j0ok9.js";import{_ as R}from"./queryIpLink.vue_vue_type_script_setup_true_lang-DM7zBXpS.js";import{f as H,a8 as J,a as m,ac as K,s as w,k as u,t as a,y as t,a9 as o,m as v,v as n,u as k,x as l,j as L,F as Q,P as W}from"./libs-4DgHpoAC.js";import{v as X,e as Y,S as Z,N as ee,T as ae,G as te}from"./arcoDesign-DAWZ9Tcr.js";import"./uuid-BMzgKRou.js";const se=H({__name:"peerListModal",setup(oe,{expose:I}){const{t:p}=J(),c=m(!1),f=m(""),g=m(""),h=m("");I({showModal:(d,s,i)=>{f.value=d,g.value=s,h.value=i,c.value=!0,$(d,s)}});const P=()=>{c.value=!1,f.value="",g.value=""},{data:y,loading:T,run:$,cancel:D}=K(V,{defaultParams:[f.value,g.value],manual:!0,pollingInterval:1e3}),F=[{title:()=>p("page.dashboard.peerList.column.address"),slotName:"peerAddress",width:320},{title:()=>p("page.dashboard.peerList.column.flag"),slotName:"flags",width:110},{title:"Peer ID",dataIndex:"peer.id",width:100},{title:()=>p("page.dashboard.peerList.column.clientName"),dataIndex:"peer.clientName",width:300},{title:()=>p("page.dashboard.peerList.column.speed"),slotName:"speed",width:140},{title:()=>p("page.dashboard.peerList.column.uploadedDownloaded"),slotName:"uploadDownload",width:140},{title:()=>p("page.dashboard.peerList.column.progress"),slotName:"progress",width:100}],S=d=>d.split(" ").map(s=>s+" - "+p("page.dashboard.peerList.column.flags."+s.trim()));return(d,s)=>{const i=ae,r=Z,b=O,x=U,A=ee,C=z,j=Y,B=X,M=te;return u(),w(M,{visible:c.value,"onUpdate:visible":s[0]||(s[0]=e=>c.value=e),"hide-cancel":"",closable:"","unmount-on-close":"",width:"auto",onOk:P,onClose:s[1]||(s[1]=e=>o(D)())},{title:a(()=>[n(l(o(p)("page.dashboard.peerList.title")+h.value),1)]),default:a(()=>[t(B,{columns:F,data:o(y)?.data,loading:!o(T)&&!o(y),style:{width:"1600px"},"virtual-list-props":{height:500},pagination:!1},{peerAddress:a(({record:e})=>[t(r,{direction:"vertical",wrap:!1,fill:""},{default:a(()=>[v("div",null,[e.geo?.country?.iso?(u(),w(q,{key:0,iso:e.geo?.country?.iso,title:`${e.geo?.country?.name??""}`},null,8,["iso","title"])):k("",!0),n(" "+l(`${e.geo?.city?.name??""} ${e.geo?.network?.isp??""} ${e.geo?.network?.netType??""}`),1)]),v("div",null,[t(i,{copyable:"",code:"",style:{"white-space":"nowrap"}},{default:a(()=>[t(R,{ip:e.peer.address.ip,style:{color:"var(--color-text-2)"}},{default:a(()=>[n(l(o(E)(e.peer.address.ip,e.peer.address.port)),1)]),_:2},1032,["ip"])]),_:2},1024)])]),_:2},1024)]),speed:a(({record:e})=>[t(r,{fill:"",style:{"justify-content":"space-between"}},{default:a(()=>[t(r,{fill:"",direction:"vertical"},{default:a(()=>[t(i,null,{default:a(()=>[t(b,{class:"green"}),n(" "+l(o(_)(e.peer.uploadSpeed))+"/s ",1)]),_:2},1024),t(i,null,{default:a(()=>[t(x,{class:"red"}),n(" "+l(o(_)(e.peer.downloadSpeed))+"/s ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),uploadDownload:a(({record:e})=>[t(r,{fill:"",style:{"justify-content":"space-between"}},{default:a(()=>[t(r,{fill:"",direction:"vertical"},{default:a(()=>[t(i,null,{default:a(()=>[t(b,{class:"green"}),n(" "+l(o(_)(e.peer.uploaded)),1)]),_:2},1024),t(i,null,{default:a(()=>[t(x,{class:"red"}),n(" "+l(o(_)(e.peer.downloaded)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),progress:a(({record:e})=>[t(r,null,{default:a(()=>[t(A,{percent:e.peer.progress,size:"mini"},null,8,["percent"]),t(i,null,{default:a(()=>[n(l((e.peer.progress*100).toFixed(2)+"%"),1)]),_:2},1024)]),_:2},1024)]),flags:a(({record:e})=>[v("p",null,[n(l(e.peer.flags)+" ",1),e.peer.flags?(u(),w(j,{key:0},{content:a(()=>[(u(!0),L(Q,null,W(S(e.peer.flags),N=>(u(),L("p",{key:N},l(N),1))),128))]),default:a(()=>[t(C)]),_:2},1024)):k("",!0)])]),_:1},8,["data","loading"])]),_:1},8,["visible"])}}}),de=G(se,[["__scopeId","data-v-9926f650"]]);export{de as default};
